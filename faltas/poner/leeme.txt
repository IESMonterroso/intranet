
1.- La cosa empieza con almafaltas.php en el directorio /admin. Supone la versión de la tabla alma que se genera con los ficheros del directorio /intranet/xml (concretamente, alma.php y exportacodigos.php, que a su vez importan y modifican los datos desde alumnos.txt y los ficheros de Evaluación de Séneca). almafaltas.php produce la tabla FALUMNOS, y solo se llama una vez a principio de Curso. En el mismo directorio, actualiza.php se encarga de añadir los alumnos nuevos y darles un NC.
2.- En el directorio raiz de faltas, el fichero que se encarga de todas las tareas para poner faltas es index.php. El resto de los ficheros son "incluidos" por este. El esquema de la presentación html se encuentra en estructura.php. Aquí está el desplegable en el que seleccionamos el profesor, desde la tabla Fprofeso. A continuación, una vez seleccionado el profesor, se recarga la página con el Calendario y el Horario del mismo.
3.- El mogollon pasa por profes.php, que se encarga de presentar el horario del profesor y convertirlo en un formulario. Seguro que se puede simplificar, pero así ha salido y funciona perfectamente. Los datos los coge de Fprofeso, y las funciones de fecha de nombres.php. En esta tabla está el desglose del método seguido para buscar el lunes de cada semana y generar las fechas del resto de la semana.
4.- insertar.php recibe los datos de profes.php cuando se pulsa Enviar. Echa un vistazo a los datos y determina si son válidos para procesar.